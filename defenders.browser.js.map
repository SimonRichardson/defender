{"version":3,"sources":["/defenders.js","/src/runes.js","/node_modules/fantasy-io/io.js","/node_modules/fantasy-io/node_modules/daggy/daggy.js","/src/soothsayer.js","/node_modules/fantasy-states/state.js","/node_modules/fantasy-states/node_modules/daggy/daggy.js","/node_modules/fantasy-tuples/tuples.js","/node_modules/fantasy-tuples/node_modules/daggy/daggy.js","/node_modules/fantasy-options/option.js","/node_modules/fantasy-options/node_modules/daggy/daggy.js","/node_modules/fantasy-combinators/combinators.js","/src/guardian.js","/src/steward.js","/src/fortune.js","/src/defender.js","/node_modules/daggy/daggy.js"],"names":["defender","require","fortune","guardian","soothsayer","runes","exports","module","IO","anything","a","RegExp","anythingBut","then","range","from","to","daggy","tagged","of","x","prototype","chain","g","io","unsafePerform","map","f","ap","global","factory","define","amd","create","proto","Ctor","getInstance","self","constructor","fields","slice","apply","arguments","wrapped","i","length","TypeError","_length","taggedSum","constructors","key","definitions","makeCata","dispatches","args","push","makeProto","cata","combinators","Maybe","State","compose","constant","identity","isSome","Some","None","error","str","Error","extract","filter","accum","b","split","sayings","pattern","M","StateT","program","lift","modify","get","exec","Tuple2","state","s","result","run","_1","_2","put","evalState","m","c","t","Tuple3","Tuple4","Tuple5","concat","_3","_4","_5","Option","fold","orElse","getOrElse","fix","h","flip","substitution","thrush","steward","join","every","not","test","normalise","regexp","predicate","clean","remove","values","y","splice","update","z","replace","e","selection","start","inject","list","together","possible","Tuples","Triad","Success","Failure","Flow","Underflow","Overflow","executeExpr","validateString","index","original","modified","consume","rec","guards","tuple","maybes","guard","contains","empty","output","possibleErrors","actualErrors","stream"],"mappings":"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","sourceRoot":".","sourcesContent":["var defender = require('./src/defender'),\n    fortune = require('./src/fortune'),\n    guardian = require('./src/guardian'),\n    soothsayer = require('./src/soothsayer'),\n    runes = require('./src/runes');\n\nexports = module.exports = {\n    defender: defender,\n    fortune: fortune,\n    guardian: guardian,\n    soothsayer: soothsayer,\n    runes: runes\n};\n","var IO = require('fantasy-io');\n\nfunction anything(a) {\n    return IO(function() {\n        return new RegExp('^' + a + '+');\n    });\n}\n\nfunction anythingBut(a) {\n    return IO(function() {\n        return new RegExp('^[^' + a + ']+');\n    });\n}\n\nfunction then(a) {\n    return IO(function() {\n        return new RegExp('^' + a);\n    });\n}\n\nfunction range(from, to) {\n    return IO(function() {\n        return new RegExp('^[' + from + '-' + to + ']');\n    });\n}\n\nexports = module.exports = {\n\tanything: anything,\n\tanythingBut: anythingBut,\n\tthen: then,\n\trange: range\n};\n","var daggy = require('daggy'),\n    IO = daggy.tagged('unsafePerform');\n\n// Methods\nIO.of = function(x) {\n    return IO(function() {\n        return x;\n    });\n};\nIO.prototype.chain = function(g) {\n    var io = this;\n    return IO(function() {\n        return g(io.unsafePerform()).unsafePerform();\n    });\n};\n\n// Derived\nIO.prototype.map = function(f) {\n    return this.chain(function(a) {\n        return IO.of(f(a));\n    });\n};\nIO.prototype.ap = function(a) {\n    return this.chain(function(f) {\n        return a.map(f);\n    });\n};\n\n// Export\nif(typeof module != 'undefined')\n    module.exports = IO;\n","/**\n  # Daggy\n\n  Library for creating tagged constructors.\n**/\n(function(global, factory) {\n    'use strict';\n\n    if(typeof define === 'function' && define.amd) {\n        define(['exports'], factory);\n    } else if(typeof exports !== 'undefined') {\n        factory(exports);\n    } else {\n        global.daggy = {};\n        factory(global.daggy);\n    }\n})(this, function(exports) {\n    function create(proto) {\n        function Ctor() {}\n        Ctor.prototype = proto;\n        return new Ctor();\n    }\n    exports.create = create;\n\n    /**\n      ## `daggy.getInstance(self, constructor)`\n\n      Returns `self` if it's an `instanceof constructor`, otherwise\n      creates a new object with `constructor`'s prototype.\n\n      Allows creating constructors that can be used with or without\n      the new keyword but always have the correct prototype.\n\n      ```javascript\n      function WrappedArray() {\n          var self = daggy.getInstance(this, WrappedArray);\n          self._array = [].slice.apply(arguments);\n          return self;\n      }\n      new WrappedArray(1, 2, 3) instanceof WrappedArray; // true\n      WrappedArray(1, 2, 3) instanceof WrappedArray; // true\n      ```\n    **/\n    function getInstance(self, constructor) {\n        return self instanceof constructor ? self : create(constructor.prototype);\n    }\n    exports.getInstance = getInstance;\n\n    /**\n      ## `daggy.tagged(arguments)`\n\n      Creates a new constructor with the given field names as\n      arguments and properties. Allows `instanceof` checks with\n      returned constructor.\n\n      ```javascript\n      var Tuple3 = daggy.tagged('x', 'y', 'z');\n\n      var _123 = Tuple3(1, 2, 3); // optional new keyword\n      _123.x == 1 && _123.y == 2 && _123.z == 3; // true\n      _123 instanceof Tuple3; // true\n      ```\n    **/\n    function tagged() {\n        var fields = [].slice.apply(arguments);\n        function wrapped() {\n            var self = getInstance(this, wrapped),\n                i;\n\n            if(arguments.length != fields.length)\n                throw new TypeError('Expected ' + fields.length + ' arguments, got ' + arguments.length);\n\n            for(i = 0; i < fields.length; i++)\n                self[fields[i]] = arguments[i];\n\n            return self;\n        }\n        wrapped._length = fields.length;\n        return wrapped;\n    }\n    exports.tagged = tagged;\n\n    /**\n      ## `daggy.taggedSum(constructors)`\n\n      Creates a constructor for each key in `constructors`. Returns a\n      function with each constructor as a property. Allows\n      `instanceof` checks for each constructor and the returned\n      function.\n\n      ```javascript\n      var Option = daggy.taggedSum({\n          Some: ['x'],\n          None: []\n      });\n\n      Option.Some(1) instanceof Option.Some; // true\n      Option.Some(1) instanceof Option; // true\n      Option.None instanceof Option; // true\n\n      function incOrZero(o) {\n          return o.cata({\n              Some: function(x) {\n                  return x + 1;\n              },\n              None: function() {\n                  return 0;\n              }\n          });\n      }\n      incOrZero(Option.Some(1)); // 2\n      incOrZero(Option.None); // 0\n      ```\n    **/\n    function taggedSum(constructors) {\n        var key;\n\n        function definitions() {\n            throw new TypeError('Tagged sum was called instead of one of its properties.');\n        }\n\n        function makeCata(key) {\n            return function(dispatches) {\n                var fields = constructors[key],\n                    args = [],\n                    i;\n\n                if(!dispatches[key])\n                    throw new TypeError(\"Constructors given to cata didn't include: \" + key);\n\n                for(i = 0; i < fields.length; i++)\n                    args.push(this[fields[i]]);\n\n                return dispatches[key].apply(this, args);\n            };\n        }\n\n        function makeProto(key) {\n            var proto = create(definitions.prototype);\n            proto.cata = makeCata(key);\n            return proto;\n        }\n\n        for(key in constructors) {\n            if(!constructors[key].length) {\n                definitions[key] = makeProto(key);\n                continue;\n            }\n            definitions[key] = tagged.apply(null, constructors[key]);\n            definitions[key].prototype = makeProto(key);\n        }\n\n        return definitions;\n    }\n    exports.taggedSum = taggedSum;\n});\n","var combinators = require('fantasy-combinators'),\n    IO = require('fantasy-io'),\n    Maybe = require('fantasy-options'),\n    State = require('fantasy-states'),\n\n    compose = combinators.compose,\n    constant = combinators.constant,\n    identity = combinators.identity,\n\n    isSome = function(a) {\n        return a.cata({\n            Some: constant(true),\n            None: constant(false)\n        });\n    },\n\n    error = function(str) {\n        return function() {\n            throw new Error(str);\n        };\n    },\n\n    extract = function() {\n        return function(a) {\n            return a.map(function(x) {\n                return x.cata({\n                    Some: identity,\n                    None: error('Invalid Option')\n                });\n            });\n        };\n    },\n\n    filter = function(f) {\n        return function(x) {\n            return function() {\n                var accum = [],\n                    i;\n\n                for(i = 0; i < x.length; i++) {\n                    if (f(x[i]))\n                        accum.push(x[i]);\n                }\n\n                return accum;\n            };\n        };\n    },\n\n    map = function(a) {\n        return function(b) {\n            return function() {\n                return b.map(function(x) {\n                    return x in a ? Maybe.Some(a[x]) : Maybe.None;\n                });\n            };\n        };\n    },\n\n    split = function(a) {\n        return function(b) {\n            return function() {\n                return b.split(a);\n            };\n        };\n    },\n\n    soothsayer = function(sayings) {\n        return function(pattern) {\n            var M = State.StateT(IO),\n\n                program =\n                    M.lift(pattern)\n                    .chain(compose(M.modify)(split('')))\n                    .chain(constant(M.get))\n                    .chain(compose(M.modify)(map(sayings)))\n                    .chain(constant(M.get))\n                    .chain(compose(M.modify)(filter(isSome)))\n                    .chain(constant(M.get))\n                    .chain(compose(M.modify)(extract))\n                    .chain(constant(M.get));\n\n            return program.exec('');\n        };\n    };\n\nexports = module.exports = soothsayer;\n","var Tuple2 = require('fantasy-tuples').Tuple2,\n    daggy = require('daggy'),\n    State = daggy.tagged('run');\n\n// Methods\nState.of = function(a) {\n    return State(function(b) {\n        return Tuple2(a, b);\n    });\n};\nState.prototype.chain = function(f) {\n    var state = this;\n    return State(function(s) {\n        var result = state.run(s);\n        return f(result._1).run(result._2);\n    });\n};\nState.get = State(function(s) {\n    return Tuple2(s, s);\n});\nState.modify = function(f) {\n    return State(function(s) {\n        return Tuple2(null, f(s));\n    });\n};\nState.put = function(s) {\n    return State.modify(function(a) {\n        return s;\n    });\n};\nState.prototype.evalState = function(s) {\n    return this.run(s)._1;\n};\nState.prototype.exec = function(s) {\n    return this.run(s)._2;\n};\n\n// Derived\nState.prototype.map = function(f) {\n    return this.chain(function(a) {\n        return State.of(f(a));\n    });\n};\nState.prototype.ap = function(a) {\n    return this.chain(function(f) {\n        return a.map(f);\n    });\n};\n\n// Transformer\nState.StateT = function(M) {\n    var StateT = daggy.tagged('run');\n    StateT.lift = function(m) {\n        return StateT(function(b) {\n            return m.map(function(c) {\n                return Tuple2(c, b);\n            });\n        });\n    };\n    StateT.of = function(a) {\n        return StateT(function(b) {\n            return M.of(Tuple2(a, b));\n        });\n    };\n    StateT.prototype.chain = function(f) {\n        var state = this;\n        return StateT(function(s) {\n            var result = state.run(s);\n            return result.chain(function(t) {\n                return f(t._1).run(t._2);\n            });\n        });\n    };\n    StateT.get = StateT(function(s) {\n        return M.of(Tuple2(s, s));\n    });\n    StateT.modify = function(f) {\n        return StateT(function(s) {\n            return M.of(Tuple2(null, f(s)));\n        });\n    };\n    StateT.put = function(s) {\n        return StateT.modify(function(a) {\n            return s;\n        });\n    };\n    StateT.prototype.evalState = function(s) {\n        return this.run(s).map(function(t) {\n            return t._1;\n        });\n    };\n    StateT.prototype.exec = function(s) {\n        return this.run(s).map(function(t) {\n            return t._2;\n        });\n    };\n    StateT.prototype.map = function(f) {\n        return this.chain(function(a) {\n            return StateT.of(f(a));\n        });\n    };\n    StateT.prototype.ap = function(a) {\n        return this.chain(function(f) {\n            return a.map(f);\n        });\n    };\n    return StateT;\n};\n\n// Export\nif(typeof module != 'undefined')\n    module.exports = State;\n","/**\n  # Daggy\n\n  Library for creating tagged constructors.\n**/\n(function(global, factory) {\n    'use strict';\n\n    if(typeof define === 'function' && define.amd) {\n        define(['exports'], factory);\n    } else if(typeof exports !== 'undefined') {\n        factory(exports);\n    } else {\n        global.daggy = {};\n        factory(global.daggy);\n    }\n})(this, function(exports) {\n    function create(proto) {\n        function Ctor() {}\n        Ctor.prototype = proto;\n        return new Ctor();\n    }\n    exports.create = create;\n\n    /**\n      ## `daggy.getInstance(self, constructor)`\n\n      Returns `self` if it's an `instanceof constructor`, otherwise\n      creates a new object with `constructor`'s prototype.\n\n      Allows creating constructors that can be used with or without\n      the new keyword but always have the correct prototype.\n\n      ```javascript\n      function WrappedArray() {\n          var self = daggy.getInstance(this, WrappedArray);\n          self._array = [].slice.apply(arguments);\n          return self;\n      }\n      new WrappedArray(1, 2, 3) instanceof WrappedArray; // true\n      WrappedArray(1, 2, 3) instanceof WrappedArray; // true\n      ```\n    **/\n    function getInstance(self, constructor) {\n        return self instanceof constructor ? self : create(constructor.prototype);\n    }\n    exports.getInstance = getInstance;\n\n    /**\n      ## `daggy.tagged(arguments)`\n\n      Creates a new constructor with the given field names as\n      arguments and properties. Allows `instanceof` checks with\n      returned constructor.\n\n      ```javascript\n      var Tuple3 = daggy.tagged('x', 'y', 'z');\n\n      var _123 = Tuple3(1, 2, 3); // optional new keyword\n      _123.x == 1 && _123.y == 2 && _123.z == 3; // true\n      _123 instanceof Tuple3; // true\n      ```\n    **/\n    function tagged() {\n        var fields = [].slice.apply(arguments);\n        function wrapped() {\n            var self = getInstance(this, wrapped),\n                i;\n\n            if(arguments.length != fields.length)\n                throw new TypeError('Expected ' + fields.length + ' arguments, got ' + arguments.length);\n\n            for(i = 0; i < fields.length; i++)\n                self[fields[i]] = arguments[i];\n\n            return self;\n        }\n        wrapped._length = fields.length;\n        return wrapped;\n    }\n    exports.tagged = tagged;\n\n    /**\n      ## `daggy.taggedSum(constructors)`\n\n      Creates a constructor for each key in `constructors`. Returns a\n      function with each constructor as a property. Allows\n      `instanceof` checks for each constructor and the returned\n      function.\n\n      ```javascript\n      var Option = daggy.taggedSum({\n          Some: ['x'],\n          None: []\n      });\n\n      Option.Some(1) instanceof Option.Some; // true\n      Option.Some(1) instanceof Option; // true\n      Option.None instanceof Option; // true\n\n      function incOrZero(o) {\n          return o.cata({\n              Some: function(x) {\n                  return x + 1;\n              },\n              None: function() {\n                  return 0;\n              }\n          });\n      }\n      incOrZero(Option.Some(1)); // 2\n      incOrZero(Option.None); // 0\n      ```\n    **/\n    function taggedSum(constructors) {\n        var key;\n\n        function definitions() {\n            throw new TypeError('Tagged sum was called instead of one of its properties.');\n        }\n\n        function makeCata(key) {\n            return function(dispatches) {\n                var fields = constructors[key],\n                    args = [],\n                    i;\n\n                if(!dispatches[key])\n                    throw new TypeError(\"Constructors given to cata didn't include: \" + key);\n\n                for(i = 0; i < fields.length; i++)\n                    args.push(this[fields[i]]);\n\n                return dispatches[key].apply(this, args);\n            };\n        }\n\n        function makeProto(key) {\n            var proto = create(definitions.prototype);\n            proto.cata = makeCata(key);\n            return proto;\n        }\n\n        for(key in constructors) {\n            if(!constructors[key].length) {\n                definitions[key] = makeProto(key);\n                continue;\n            }\n            definitions[key] = tagged.apply(null, constructors[key]);\n            definitions[key].prototype = makeProto(key);\n        }\n\n        return definitions;\n    }\n    exports.taggedSum = taggedSum;\n});\n","var daggy = require('daggy'),\n    Tuple2 = daggy.tagged('_1', '_2'),\n    Tuple3 = daggy.tagged('_1', '_2', '_3'),\n    Tuple4 = daggy.tagged('_1', '_2', '_3', '_4'),\n    Tuple5 = daggy.tagged('_1', '_2', '_3', '_4', '_5');\n\n// Methods\nTuple2.prototype.concat = function(b) {\n    return Tuple2(\n        this._1.concat(b._1),\n        this._2.concat(b._2)\n    );\n};\nTuple3.prototype.concat = function(b) {\n    return Tuple3(\n        this._1.concat(b._1),\n        this._2.concat(b._2),\n        this._3.concat(b._3)\n    );\n};\nTuple4.prototype.concat = function(b) {\n    return Tuple4(\n        this._1.concat(b._1),\n        this._2.concat(b._2),\n        this._3.concat(b._3),\n        this._4.concat(b._4)\n    );\n};\nTuple5.prototype.concat = function(b) {\n    return Tuple5(\n        this._1.concat(b._1),\n        this._2.concat(b._2),\n        this._3.concat(b._3),\n        this._4.concat(b._4),\n        this._5.concat(b._5)\n    );\n};\n\n// Export\nif(typeof exports != 'undefined') {\n    exports.Tuple2 = Tuple2;\n    exports.Tuple3 = Tuple3;\n    exports.Tuple4 = Tuple4;\n    exports.Tuple5 = Tuple5;\n}\n","/**\n  # Daggy\n\n  Library for creating tagged constructors.\n**/\n(function(global, factory) {\n    'use strict';\n\n    if(typeof define === 'function' && define.amd) {\n        define(['exports'], factory);\n    } else if(typeof exports !== 'undefined') {\n        factory(exports);\n    } else {\n        global.daggy = {};\n        factory(global.daggy);\n    }\n})(this, function(exports) {\n    function create(proto) {\n        function Ctor() {}\n        Ctor.prototype = proto;\n        return new Ctor();\n    }\n    exports.create = create;\n\n    /**\n      ## `daggy.getInstance(self, constructor)`\n\n      Returns `self` if it's an `instanceof constructor`, otherwise\n      creates a new object with `constructor`'s prototype.\n\n      Allows creating constructors that can be used with or without\n      the new keyword but always have the correct prototype.\n\n      ```javascript\n      function WrappedArray() {\n          var self = daggy.getInstance(this, WrappedArray);\n          self._array = [].slice.apply(arguments);\n          return self;\n      }\n      new WrappedArray(1, 2, 3) instanceof WrappedArray; // true\n      WrappedArray(1, 2, 3) instanceof WrappedArray; // true\n      ```\n    **/\n    function getInstance(self, constructor) {\n        return self instanceof constructor ? self : create(constructor.prototype);\n    }\n    exports.getInstance = getInstance;\n\n    /**\n      ## `daggy.tagged(arguments)`\n\n      Creates a new constructor with the given field names as\n      arguments and properties. Allows `instanceof` checks with\n      returned constructor.\n\n      ```javascript\n      var Tuple3 = daggy.tagged('x', 'y', 'z');\n\n      var _123 = Tuple3(1, 2, 3); // optional new keyword\n      _123.x == 1 && _123.y == 2 && _123.z == 3; // true\n      _123 instanceof Tuple3; // true\n      ```\n    **/\n    function tagged() {\n        var fields = [].slice.apply(arguments);\n        function wrapped() {\n            var self = getInstance(this, wrapped),\n                i;\n\n            if(arguments.length != fields.length)\n                throw new TypeError('Expected ' + fields.length + ' arguments, got ' + arguments.length);\n\n            for(i = 0; i < fields.length; i++)\n                self[fields[i]] = arguments[i];\n\n            return self;\n        }\n        wrapped._length = fields.length;\n        return wrapped;\n    }\n    exports.tagged = tagged;\n\n    /**\n      ## `daggy.taggedSum(constructors)`\n\n      Creates a constructor for each key in `constructors`. Returns a\n      function with each constructor as a property. Allows\n      `instanceof` checks for each constructor and the returned\n      function.\n\n      ```javascript\n      var Option = daggy.taggedSum({\n          Some: ['x'],\n          None: []\n      });\n\n      Option.Some(1) instanceof Option.Some; // true\n      Option.Some(1) instanceof Option; // true\n      Option.None instanceof Option; // true\n\n      function incOrZero(o) {\n          return o.cata({\n              Some: function(x) {\n                  return x + 1;\n              },\n              None: function() {\n                  return 0;\n              }\n          });\n      }\n      incOrZero(Option.Some(1)); // 2\n      incOrZero(Option.None); // 0\n      ```\n    **/\n    function taggedSum(constructors) {\n        var key;\n\n        function definitions() {\n            throw new TypeError('Tagged sum was called instead of one of its properties.');\n        }\n\n        function makeCata(key) {\n            return function(dispatches) {\n                var fields = constructors[key],\n                    args = [],\n                    i;\n\n                if(!dispatches[key])\n                    throw new TypeError(\"Constructors given to cata didn't include: \" + key);\n\n                for(i = 0; i < fields.length; i++)\n                    args.push(this[fields[i]]);\n\n                return dispatches[key].apply(this, args);\n            };\n        }\n\n        function makeProto(key) {\n            var proto = create(definitions.prototype);\n            proto.cata = makeCata(key);\n            return proto;\n        }\n\n        for(key in constructors) {\n            if(!constructors[key].length) {\n                definitions[key] = makeProto(key);\n                continue;\n            }\n            definitions[key] = tagged.apply(null, constructors[key]);\n            definitions[key].prototype = makeProto(key);\n        }\n\n        return definitions;\n    }\n    exports.taggedSum = taggedSum;\n});\n","var daggy = require('daggy'),\n    Option = daggy.taggedSum({\n        Some: ['x'],\n        None: []\n    });\n\n// Methods\nOption.prototype.fold = function(f, g) {\n    return this.cata({\n        Some: f,\n        None: g\n    });\n};\nOption.of = Option.Some;\nOption.prototype.orElse = function(x) {\n    return this.fold(\n        function(x) {\n            return Option.Some(x);\n        },\n        function() {\n            return x;\n        }\n    );\n};\nOption.prototype.getOrElse = function(x) {\n    return this.fold(\n        function(a) {\n            return a;\n        },\n        function() {\n            return x;\n        }\n    );\n};\nOption.prototype.chain = function(f) {\n    return this.fold(\n        function(a) {\n            return f(a);\n        },\n        function() {\n            return Option.None;\n        }\n    );\n};\nOption.prototype.concat = function(x) {\n    return this.fold(\n        function(a) {\n            return x.chain(function(b) {\n                return Option.Some(a.concat(b));\n            });\n        },\n        function() {\n            return b;\n        }\n    );\n};\n\n// Derived\nOption.prototype.map = function(f) {\n    return this.chain(function(a) {\n        return Option.of(f(a));\n    });\n};\nOption.prototype.ap = function(a) {\n    return this.chain(function(f) {\n        return a.map(f);\n    });\n};\n\n// Export\nif(typeof module != 'undefined')\n    module.exports = Option;\n","/**\n  # Daggy\n\n  Library for creating tagged constructors.\n**/\n(function(global, factory) {\n    'use strict';\n\n    if(typeof define === 'function' && define.amd) {\n        define(['exports'], factory);\n    } else if(typeof exports !== 'undefined') {\n        factory(exports);\n    } else {\n        global.daggy = {};\n        factory(global.daggy);\n    }\n})(this, function(exports) {\n    function create(proto) {\n        function Ctor() {}\n        Ctor.prototype = proto;\n        return new Ctor();\n    }\n    exports.create = create;\n\n    /**\n      ## `daggy.getInstance(self, constructor)`\n\n      Returns `self` if it's an `instanceof constructor`, otherwise\n      creates a new object with `constructor`'s prototype.\n\n      Allows creating constructors that can be used with or without\n      the new keyword but always have the correct prototype.\n\n      ```javascript\n      function WrappedArray() {\n          var self = daggy.getInstance(this, WrappedArray);\n          self._array = [].slice.apply(arguments);\n          return self;\n      }\n      new WrappedArray(1, 2, 3) instanceof WrappedArray; // true\n      WrappedArray(1, 2, 3) instanceof WrappedArray; // true\n      ```\n    **/\n    function getInstance(self, constructor) {\n        return self instanceof constructor ? self : create(constructor.prototype);\n    }\n    exports.getInstance = getInstance;\n\n    /**\n      ## `daggy.tagged(arguments)`\n\n      Creates a new constructor with the given field names as\n      arguments and properties. Allows `instanceof` checks with\n      returned constructor.\n\n      ```javascript\n      var Tuple3 = daggy.tagged('x', 'y', 'z');\n\n      var _123 = Tuple3(1, 2, 3); // optional new keyword\n      _123.x == 1 && _123.y == 2 && _123.z == 3; // true\n      _123 instanceof Tuple3; // true\n      ```\n    **/\n    function tagged() {\n        var fields = [].slice.apply(arguments);\n        function wrapped() {\n            var self = getInstance(this, wrapped),\n                i;\n\n            if(arguments.length != fields.length)\n                throw new TypeError('Expected ' + fields.length + ' arguments, got ' + arguments.length);\n\n            for(i = 0; i < fields.length; i++)\n                self[fields[i]] = arguments[i];\n\n            return self;\n        }\n        wrapped._length = fields.length;\n        return wrapped;\n    }\n    exports.tagged = tagged;\n\n    /**\n      ## `daggy.taggedSum(constructors)`\n\n      Creates a constructor for each key in `constructors`. Returns a\n      function with each constructor as a property. Allows\n      `instanceof` checks for each constructor and the returned\n      function.\n\n      ```javascript\n      var Option = daggy.taggedSum({\n          Some: ['x'],\n          None: []\n      });\n\n      Option.Some(1) instanceof Option.Some; // true\n      Option.Some(1) instanceof Option; // true\n      Option.None instanceof Option; // true\n\n      function incOrZero(o) {\n          return o.cata({\n              Some: function(x) {\n                  return x + 1;\n              },\n              None: function() {\n                  return 0;\n              }\n          });\n      }\n      incOrZero(Option.Some(1)); // 2\n      incOrZero(Option.None); // 0\n      ```\n    **/\n    function taggedSum(constructors) {\n        var key;\n\n        function definitions() {\n            throw new TypeError('Tagged sum was called instead of one of its properties.');\n        }\n\n        function makeCata(key) {\n            return function(dispatches) {\n                var fields = constructors[key],\n                    args = [],\n                    i;\n\n                if(!dispatches[key])\n                    throw new TypeError(\"Constructors given to cata didn't include: \" + key);\n\n                for(i = 0; i < fields.length; i++)\n                    args.push(this[fields[i]]);\n\n                return dispatches[key].apply(this, args);\n            };\n        }\n\n        function makeProto(key) {\n            var proto = create(definitions.prototype);\n            proto.cata = makeCata(key);\n            return proto;\n        }\n\n        for(key in constructors) {\n            if(!constructors[key].length) {\n                definitions[key] = makeProto(key);\n                continue;\n            }\n            definitions[key] = tagged.apply(null, constructors[key]);\n            definitions[key].prototype = makeProto(key);\n        }\n\n        return definitions;\n    }\n    exports.taggedSum = taggedSum;\n});\n","// A combinator\nfunction apply(f) {\n    return function(x) {\n        return f(x);\n    };\n}\n\n// B combinator\nfunction compose(f) {\n    return function(g) {\n        return function(x) {\n            return f(g(x));\n        };\n    };\n}\n\n// K combinator\nfunction constant(a) {\n    return function(b) {\n        return a;\n    };\n}\n\n// Y combinator\nfunction fix(f) {\n    function g(h) {\n        return function(x) {\n            return f(h(h))(x);\n        };\n    };\n    return g(g);\n}\n\n// C combinator\nfunction flip(f) {\n    return function(a) {\n        return function(b) {\n            return f(b)(a);\n        };\n    };\n}\n\n// I combinator\nfunction identity(a) {\n    return a;\n}\n\n// S combinator\nfunction substitution(f) {\n    return function(g) {\n        return function(x) {\n            f(x)(g(x));\n        };\n    };\n}\n\n// T combinator\nfunction thrush(x) {\n    return function(f) {\n        return f(x);\n    };\n}\n\n// Export\nif(typeof module != 'undefined')\n    module.exports = {\n        apply: apply,\n        compose: compose,\n        constant: constant,\n        fix: fix,\n        flip: flip,\n        identity: identity,\n        substitution: substitution,\n        thrush: thrush\n    };\n","var combinators = require('fantasy-combinators'),\n    IO = require('fantasy-io'),\n    State = require('fantasy-states'),\n    steward = require('./steward'),\n\n    ap = combinators.apply,\n    compose = combinators.compose,\n    constant = combinators.constant,\n    \n    split = function(a) {\n        return function(b) {\n            return b.split(a);\n        };\n    },\n    join = function(a) {\n        return function(b) {\n            return b.join(a);\n        };\n    },\n\n    filter = function(f) {\n        return function(x) {\n            var accum = [],\n                i;\n            for(i = 0;  i < x.length; i++) {\n                if (f(x[i]))\n                    accum.push(x[i]);\n            }\n            return accum;\n        };\n    },\n    every = function(f) {\n        return function(x) {\n            return steward(split(''), join(''))(f)(x);\n        };\n    },\n    not = function(a) {\n        return !a;\n    },\n    test = function(a) {\n        return function(b) {\n            return a.test(b);\n        };\n    },\n\n    normalise = function(regexp) {\n        return function(f) {\n            var M = State.StateT(IO),\n\n                predicate = compose(not)(test(regexp)),\n                clean = ap(every(filter(predicate))),\n\n                program = M.lift(f)\n                    .chain(compose(M.modify)(\n                        function(a) {\n                            return constant(clean(a));\n                        }\n                    ))\n                    .chain(constant(M.get));\n\n            return program.exec('');\n        };\n    };\n\nexports = module.exports = normalise;\n","var combinators = require('fantasy-combinators'),\n    \n    compose = combinators.compose,\n\n    steward = function(a, b) {\n        return function(c) {\n            return compose(compose(b)(c))(a);\n        };\n    };\n\nexports = module.exports = steward;\n","var combinators = require('fantasy-combinators'),\n    IO = require('fantasy-io'),\n    State = require('fantasy-states'),\n    steward = require('./steward'),\n\n    ap = combinators.apply,\n    compose = combinators.compose,\n    constant = combinators.constant,\n    identity = combinators.identity,\n\n    split = function(a) {\n        return function(b) {\n            return [b[0].split(a), b[1]];\n        };\n    },\n\n    join = function(a) {\n        return function(b) {\n            return [b[0].join(a), b[1]];\n        };\n    },\n\n    remove = function(values) {\n        var a = values.slice();\n        return function(x, y) {\n            a.splice(x, y);\n            return a;\n        };\n    },\n\n    update = function(values) {\n        var a = values.slice();\n        return function(x, y) {\n            return function(z) {\n                a.splice(x, y, z);\n                return a;\n            };\n        };\n    },\n\n    replace = function(e) {\n        return function(b) {\n            var selection = b[1],\n                start = selection[0],\n                result = e.fold(\n                    function(x) {\n                        var a = remove(b[0]);\n                        return x.fold(\n                            constant(a(start - 1, 1)),\n                            constant(a(start, 1))\n                        );\n                    },\n                    function(x) {\n                        var a = update(b[0]);\n                        return x.fold(\n                            constant(b[0]),\n                            a(start, selection[1] - start)\n                        );\n                    }\n                );\n            return [result, selection];\n        };\n    },\n\n    inject = function(x) {\n        return function(a) {\n            return function(b) {\n                var list = steward(split(''), join(''));\n                return list(replace(a))(b);\n            };\n        };\n    },\n\n    together = function(a) {\n        return function(b) {\n            return [b, a];\n        };\n    },\n\n    extract = function() {\n        return function(b) {\n            return b[0];\n        };\n    },\n\n    fortune = function(io) {\n        return function(key, selection) {\n            var M = State.StateT(IO),\n \n                values =\n                    M.lift(key)\n                    .chain(compose(M.modify)(constant))\n                    .chain(constant(M.get))\n                    .chain(compose(M.modify)(inject))\n                    .chain(constant(M.get)),\n \n                possible = values.exec(''),\n \n                fortune =\n                    M.lift(io)\n                    .chain(compose(M.modify)(constant))\n                    .chain(constant(M.lift(selection)))\n                    .chain(compose(M.modify)(together))\n                    .chain(constant(M.get))\n                    .chain(constant(M.lift(possible)))\n                    .chain(compose(M.modify)(ap))\n                    .chain(constant(M.get))\n                    .chain(compose(M.modify)(extract))\n                    .chain(constant(M.get));\n \n            return fortune.exec('');\n        };\n    };\n\nexports = module.exports = fortune;\n","var combinators = require('fantasy-combinators'),\n    daggy = require('daggy'),\n    \n    IO = require('fantasy-io'),\n    State = require('fantasy-states'),\n    Tuples = require('fantasy-tuples'),\n\n    compose = combinators.compose,\n    constant = combinators.constant,\n\n    Tuple2 = Tuples.Tuple2,\n    Tuple4 = Tuples.Tuple4,\n\n    Triad = daggy.taggedSum({\n        Success: ['x'],\n        Maybe: ['flow'],\n        Failure: ['errors']\n    }),\n    Flow = daggy.taggedSum({\n        Underflow: ['underflow', 'position'],\n        Overflow: ['overflow', 'position']\n    }),\n\n    executeExpr = function(a) {\n        return function(b) {\n            return constant(b.exec(a));\n        };\n    },\n\n    push = function(a, b) {\n        var x = a.slice();\n        x.push(b);\n        return x;\n    },\n\n    validateString = function(program, index, accum, original, modified) {\n        return function(possible) {\n            if(possible) {\n                return constant(\n                    Tuple4(\n                        program,\n                        original,\n                        modified.slice(possible[0].length),\n                        accum\n                    )\n                );\n            } else {\n                return constant(\n                    Tuple4(\n                        program,\n                        original,\n                        modified,\n                        push(accum, Tuple2(modified, index))\n                    )\n                );\n            }\n        };\n    },\n\n    consume = function(a) {\n        var M = State.StateT(IO),\n\n            rec = function(index, guards) {\n                return function(tuple) {\n                    var program = tuple._1,\n                        original = tuple._2,\n                        modified = original.length >= 1 ? original.slice(index) : original,\n                        maybes = tuple._4,\n                        guard;\n\n                    if (index < guards.length) {\n                        guard = guards[index];\n\n                        return program\n                            .chain(constant(M.lift(guard)))\n                            .chain(compose(M.modify)(executeExpr(modified)))\n                            .chain(constant(M.get))\n                            .chain(compose(M.modify)(validateString(program, index, maybes, original, modified)))\n                            .chain(constant(M.get))\n                            .chain(rec(index + 1, guards));\n                    } else {\n                        return program;\n                    }\n                };\n            };\n        return function(b) {\n            return rec(0, b)(Tuple4(M.of(''), a, '', []));\n        };\n    },\n\n    contains = function(x, f) {\n        var i;\n        for (i = 0; i < x.length; i++) {\n            if (f(x[i]))\n                return true;\n        }\n        return false;\n    },\n\n    filter = function(x, f) {\n        var accum = [],\n            i;\n        for (i = 0; i < x.length; i++) {\n            if (f(x[i]))\n                accum.push(x[i]);\n        }\n        return accum;\n    },\n\n    empty = function(x) {\n        return x._1 !== '';\n    },\n\n    output = function(a) {\n        return function() {\n            var original = a._2,\n                modified = a._3,\n                possibleErrors = a._4,\n                actualErrors = filter(possibleErrors, empty);\n\n            // Re-factor this, as it's really messy\n            if (possibleErrors.length < 1 && modified.length > 0) {\n                // Check for overflows\n                return Triad.Maybe(Flow.Overflow(modified, original.length - modified.length));\n\n            } else if(possibleErrors.length > 0) {\n                \n                if (modified.length < 1 && !contains(possibleErrors, empty)) {\n                    // Check for underflows\n                    return Triad.Maybe(Flow.Underflow(modified, modified.length));\n\n                } else\n                    return Triad.Failure(actualErrors);\n\n            } else\n                return Triad.Success(original);\n        };\n    },\n\n    defender = function(sayings) {\n        return function(stream) {\n            var M = State.StateT(IO),\n\n                program =\n                    M.lift(sayings)\n                    .chain(compose(M.modify)(constant))\n                    .chain(constant(M.lift(stream)))\n                    .chain(function(a) {\n                        return M.modify(function(b) {\n                            return consume(a)(b).exec('');\n                        });\n                    })\n                    .chain(constant(M.get))\n                    .chain(function(a) {\n                        return M.lift(a);\n                    })\n                    .chain(compose(M.modify)(output))\n                    .chain(constant(M.get));\n                    \n            return program.exec([]);\n        };\n    };\n\nexports = module.exports = defender;\n","/**\n  # Daggy\n\n  Library for creating tagged constructors.\n**/\n(function(global, factory) {\n    'use strict';\n\n    if(typeof define === 'function' && define.amd) {\n        define(['exports'], factory);\n    } else if(typeof exports !== 'undefined') {\n        factory(exports);\n    } else {\n        global.daggy = {};\n        factory(global.daggy);\n    }\n})(this, function(exports) {\n    function create(proto) {\n        function Ctor() {}\n        Ctor.prototype = proto;\n        return new Ctor();\n    }\n    exports.create = create;\n\n    /**\n      ## `daggy.getInstance(self, constructor)`\n\n      Returns `self` if it's an `instanceof constructor`, otherwise\n      creates a new object with `constructor`'s prototype.\n\n      Allows creating constructors that can be used with or without\n      the new keyword but always have the correct prototype.\n\n      ```javascript\n      function WrappedArray() {\n          var self = daggy.getInstance(this, WrappedArray);\n          self._array = [].slice.apply(arguments);\n          return self;\n      }\n      new WrappedArray(1, 2, 3) instanceof WrappedArray; // true\n      WrappedArray(1, 2, 3) instanceof WrappedArray; // true\n      ```\n    **/\n    function getInstance(self, constructor) {\n        return self instanceof constructor ? self : create(constructor.prototype);\n    }\n    exports.getInstance = getInstance;\n\n    /**\n      ## `daggy.tagged(arguments)`\n\n      Creates a new constructor with the given field names as\n      arguments and properties. Allows `instanceof` checks with\n      returned constructor.\n\n      ```javascript\n      var Tuple3 = daggy.tagged('x', 'y', 'z');\n\n      var _123 = Tuple3(1, 2, 3); // optional new keyword\n      _123.x == 1 && _123.y == 2 && _123.z == 3; // true\n      _123 instanceof Tuple3; // true\n      ```\n    **/\n    function tagged() {\n        var fields = [].slice.apply(arguments);\n        function wrapped() {\n            var self = getInstance(this, wrapped),\n                i;\n\n            if(arguments.length != fields.length)\n                throw new TypeError('Expected ' + fields.length + ' arguments, got ' + arguments.length);\n\n            for(i = 0; i < fields.length; i++)\n                self[fields[i]] = arguments[i];\n\n            return self;\n        }\n        wrapped._length = fields.length;\n        return wrapped;\n    }\n    exports.tagged = tagged;\n\n    /**\n      ## `daggy.taggedSum(constructors)`\n\n      Creates a constructor for each key in `constructors`. Returns a\n      function with each constructor as a property. Allows\n      `instanceof` checks for each constructor and the returned\n      function.\n\n      ```javascript\n      var Option = daggy.taggedSum({\n          Some: ['x'],\n          None: []\n      });\n\n      Option.Some(1) instanceof Option.Some; // true\n      Option.Some(1) instanceof Option; // true\n      Option.None instanceof Option; // true\n\n      function incOrZero(o) {\n          return o.cata({\n              Some: function(x) {\n                  return x + 1;\n              },\n              None: function() {\n                  return 0;\n              }\n          });\n      }\n      incOrZero(Option.Some(1)); // 2\n      incOrZero(Option.None); // 0\n      ```\n    **/\n    function taggedSum(constructors) {\n        var key;\n\n        function definitions() {\n            throw new TypeError('Tagged sum was called instead of one of its properties.');\n        }\n\n        function makeCata(key) {\n            return function(dispatches) {\n                var fields = constructors[key],\n                    args = [],\n                    i;\n\n                if(!dispatches[key])\n                    throw new TypeError(\"Constructors given to cata didn't include: \" + key);\n\n                for(i = 0; i < fields.length; i++)\n                    args.push(this[fields[i]]);\n\n                return dispatches[key].apply(this, args);\n            };\n        }\n\n        function makeProto(key) {\n            var proto = create(definitions.prototype);\n            proto.cata = makeCata(key);\n            return proto;\n        }\n\n        for(key in constructors) {\n            if(!constructors[key].length) {\n                definitions[key] = makeProto(key);\n                continue;\n            }\n            definitions[key] = tagged.apply(null, constructors[key]);\n            definitions[key].prototype = makeProto(key);\n        }\n\n        return definitions;\n    }\n    exports.taggedSum = taggedSum;\n});\n"]}